## 进程线程

1. https://blog.csdn.net/u010851789/article/details/97613703

2. #### 什么是进程和线程

   1. 进程是资源分配和调度的一个独立单元；线程是 cpu 调度的基本单元
   2. 同一个进程中可以包括多个线程，并且线程共享整个进程的资源，一个进程至少包含换一个线程
   3. 进程的创建用 fork 或者 vfork；线程的创建调用 pthread_creat，进程结束后它拥有的所有线程都将销毁，而线程的结束不会影响同个进程中其他线程的结束
   4. 线程是轻量级的进程，他的创建和销毁所需要的时间比进程小很多，所有操作系统中的执行功能都是创建线程去完成的。
   5. 多线程执行时一般需要进行同步和互斥，因为他们共享同一进程的所有资源

3. #### 为什么要有进程和线程

   1. 进程属于在 CPU 和系统资源等方面提供的抽象，能够有效提高 CPU 的利用率
   2. 线程是在进程这个层次上提供的一层并发的抽象
      1. 能够使系统在同一时间能够做多件事情
      2. 当进程遇到阻塞时，例如等待输入，线程能够使不依赖输入数据的工作继续执行
      3. 可以有效地利用多处理器和多核计算机
   3. 进程和线程的主要差别在于他们是不同的操作系统资源管理方式。进程有独立的地址空间，一个进程崩溃后，在保护模式下不会对其他进程产生影响，而线程只是一个进程中的不同执行路径。线程有自己的堆栈和局部变量，但线程之间没有单独的地址空间，一个线程死掉就等于整个进程死掉，所以多进程的程序要比多线程的程序健壮，但在进程切换时，耗费资源较大，效率要差一些。

4. #### 线程的通讯方式

   1. 通道
   2. 消息队列，基于消息的，用无亲缘关系的进程间通信，主要函数 msgget/msgsend/msgrecv/msgctl
   3. 信号量，相同于一个把互斥锁，通过 p\v 操作，主要函数 semget/semop/semctl
   4. 共享内存，是进程间通信速度最快的，所以用经常是集合信号量或互斥锁来实现同步

5. #### 什么是孤儿进程，什么是僵尸进程，什么是守护进程

   1. 孤儿进程：一个父进程退出。而它的一个或多个子进程还在运行，那么那些子进程将成为孤儿进程；孤儿进程将被 init 进程（进程号 1）所收养，并由 init 进程对他们完成状态收集工作；孤儿进程会被 init 进程收养，所以危害不大
   2. 僵尸进程：一个进程使用 fork 创建子进程，如果子进程退出，而父进程并没有调用 wait 或 waitpid 来获取子进程的状态信息，那么子进程的进程描述符仍然保存在系统中。如果僵尸进程过多，会消耗大量的进程 pid，导致系统不能产生新的进程，所以需要避免
   3. 守护进程：守护进程是一个在后台运行且不受任何终端控制的进程，用于执行特定的系统任务。

6. #### 多线程的缺点

   1. 等待使用共享资源时造成程序的运行速度变慢，比如打印机这种独占性的共享资源。
   2. 对线程管理要求额外的 CPU 开销，线程的使用会给系统带来上下文切换额外的负担
   3. 线程的死锁。对共享资源加锁实现同步的过程中可能会死锁。
   4. 对共有变量的同时读或写，可能会造成脏读等。、

7. #### 适合多线程处理的任务有哪些

   1. 耗时或大量占用处理器的任务阻塞用户界面操作
   2. 各个任务必须等待外部资源