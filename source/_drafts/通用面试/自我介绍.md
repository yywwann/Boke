## 自我介绍

你好, 我叫陈鸿宇,来自浙江温州, 今年23岁, 有一年的golang开发经验, 在上一家公司负责公司内部的即时通讯项目。

我在上一家公司从事golang后端开发, 负责业务是公司内部的聊天程序后端开发,  项目采用微服务架构, 总共十余个服务, 大致分为三个部分: 接入层, 聊天应用层, 拓展插件层 

第一个是基于goim的聊天接入层, 用户通过websocket与服务端建立连接并收发消息, 并发消息至kafka, 解耦接入层与聊天应用层；第二部分是聊天核心应用, 包括消息响应、转发、存储, 群聊服务, 音视频服务, 云存储服务, 离线推送服务等, 接入层和聊天应用层实现了基本的私聊,群聊,音视频聊天； 第三部分是聊天拓展插件模块, 服务端通过配置是否开启, 让客户端支持转账、红包、兑换、 商场、 直播、 企业模块等第三方功能。

我在项目中主要负责聊天应用中的群聊服务, 音视频服务, 云存储服务, 企业模块中的团队架构和权限控制模块, 平时还会根据测试反馈, 协助组长寻找并处理聊天整个消息收发流程中出现的bug。



开发语言golang, http框架gin和go-zero, rpc框架是grpc, 数据库和缓存是mysql, redis



- 基本信息

- 工作总结

- 最近工作

- 平时学习

  平时学习方式 看书 看博客

  github

- 未来规划

  未来有什么打算

2-3分钟

# 项目介绍

逻辑思维

项目整体

架构思维

解决问题

- 项目背景

  最早是为公司内部自己使用, 同时也能给其他app提供聊天服务

- 系统架构（项目采用了什么架构,为什么）

  项目采用微服务架构, 总共十余个服务, 大致分为三个部分: 接入层, 聊天逻辑层, 拓展应用层 

  第一个是基于goim的聊天接入层, 用户通过tcp或者websocket与服务端建立连接并收发消息, 并发消息至kafka, 解耦接入层与聊天应用层；第二部分是聊天逻辑层, 包括消息响应、转发、存储, 群聊服务, 音视频服务, 云存储服务, 离线推送服务等, 接入层和聊天应用层实现了基本的私聊,群聊,音视频聊天； 第三部分是拓展应用层 , 服务端通过配置是否开启, 让客户端支持转账、红包、兑换、 商场、 直播、 企业模块等第三方功能。

  别的服务需要聊天功能时可以直接把需要的服务抽出来独立部署

  他们也可以开发自己的第三方模块

- 技术栈

  1. 使用微服务网关向客户端暴露http接口, （链路追踪, 统一鉴权, 日志, 限流, 缓存  , 接口聚合, 权限校验, 数据转换）7/】】

  2. 内部服务之间使用etcd进行服务注册和发现, 通过grpc进行通讯,（ 基于HTTP/2, HTTP/2 提供了连接多路复用、双向流、服务器推送、请求优先级、首部压缩等机制 可以节省带宽、降低TCP链接次数、节省CPU）

  3. 消息采用protobuf协议（该协议在序列化效率、压缩、可扩展方面都具有优势）, 在接入层和逻辑层之间使用kafka传递, （两个服务之间的消费速度不一致, 用kafka作为缓冲, 让下游按自己的节奏处理, 同事解耦业务流程, 提高业务的拓展能力, 调高程序的健壮性 ）

  用到了哪些技术栈, 这些技术栈解决了那些问题

- 职责（负责业务）

  我在项目中主要负责聊天应用中的群聊服务, 音视频服务, 云存储服务, 企业模块中的团队架构和权限控制模块, 平时还会根据测试反馈, 协助组长寻找并处理聊天整个消息收发流程中出现的bug。

  

- 项目亮点（项目有哪些特色, 有什么技术含量, 高并发, 大数据量）

  

- 个人贡献（超出一般程序员的事情,解决那些性能的问题,解决哪些技术问题,主动解决 承担）

  1. 重点讲讲RBAC角色模块, 一个用户可以有多个角色, 一个角色有多个权限, 一个权限有多个操作接口, 
     1. 使用casbin快速判断
     2. 权限数字设计, 只用查出一个人有哪些角色, 快速判断一个人所拥有的全部权限；减少一次数据库查询
     3. 使用etcd监视器通知casbin执行器更新策略
  2. 平时都是单机 单服务测试, 主动尝试在新的一台机器上测试水平拓展, 果然出了问题
     1. comet中的websocket链接都是直接存储在内存当中
  3. 组织架构与群组模块的联动
     1. 组织架构中的部门和人员变动都会影响到群组, 原先的流程是
  4. traceId
  5. 异步消息处理流程



- 平时看什么书

  美团技术团队博客

  Go语言高级编程

  Go语言中文网

  go夜读

  阮一峰, 陈皓的博客

- 有没有开源经验

  github上有一个70+star的python项目

- 源码阅读

  平常工作中比较喜欢查看框架和第三方包的源码, 还有公司里其他项目组的pkg, 学习写法和新东西

- 离职原因

  负责项目是即时通讯项目, 市场发展不明朗, 竞争不过企业微信, 钉钉之类的, 优势是私有部署, 聊天加密

  公司不重视这个项目, 没有扩大团队的想法

  团队负责后端的只有两人, 我和组长, 组长负责与区块链的对接和聊天消息相关的处理, 我负责其他各种聊天业务的开发, 个人能力水平无法得到明显的进步

  基础设施不完善

  go 容器平台

  个人发展, 工作上遇到了瓶颈，出来想挑战一下自己。

## 反问

- 你们怎么追踪 bug?
- 你们怎么测试代码？
- 你们怎样监控项目？
- 你们怎么集成和部署代码改动？是使用持续集成和持续部署吗 (CI/CD)？
- 公司是否有技术分享交流活动？有的话，多久一次呢？(zh)
- Code Review 如何实施？
- 日常工作时间





## 

- 项目中遇到了什么问题, 怎么解决的
  - comet grpc自定义负载均衡
    - 因为用户通过websocket与comet服务端建立连接, 如果comet水平拓展, 拥有多个实例, 用户会通过nginx分配到其中一个comet中
  - oa group 联动
  - 基于casbin的rbac
- 负责了什么东西



椭圆曲线加密的椭圆曲线数字签名算法（**ECDSA**）。特定的椭圆曲线称为**secp256k1**