# 压测工具使用说明



## 创建用户

在 `client-tools` 项目中使用命令 `createlist 5000` 创建 5000 个用户备用

```shell
$ git clone git@gitlab.33.cn:chy/client-tools.git
$ cd client-tools/cmd/
$ go build -o cli
$ ./cli createlist 5000
```

用户信息格式为 <用户编号>,<签名>,<地址>



## 生成压测工具

```shell
$ git clone git@gitlab.33.cn:chat/im-util.git
$ cd im-util/client-pressure/cmd/cli
$ go build -o cli
```

使用前需要把 DB.txt 放到 db 文件夹中



## 压测策略

> ./cli pm -n=n -m=m

模拟私聊行为,  `n` 个用户同时在线, 每隔 `1` 秒随机向另一个人发送一条信息, 每人发 `m` 条

总共 `n*m` 条信息



> ./cli gc -n=n -m=m

模拟群聊行为,  `n`  个用户同时在线, 并在一个群里, 每人每隔 `1` 秒发一条信息, 即同时向群里其他所有人发一条信息, 每人发 ` m`  条

总共 `n*(n-1)*m` 条信息


> ./cli clean -n=n

n 个用户登录，不发消息，只接收消息



